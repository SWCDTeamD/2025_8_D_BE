---
alwaysApply: false
---
사용자의 질의를 입력받아 AWS bedrock환경의 opus or sonner 모델을 사용하여 의미있는 단위의 청크로 나누어 그 청크들을 정형데이터기반 청크인지 비정형데이터 기반의 청크인지 분석함

case 1) 자연어 질의가 전부 정형데이터의 청크라면 정형데이터의 답변을 기반으로한 regex 정규표현식을 사용하여 SQL 쿼리문을 생성, 패널 추출
Case 2) 자연어 질의가 전부 비정형데이터의 청크라면 비정형데이터 테이블의 데이터를 활용하여 벡터유사도 검색 + 요약텍스트컬럼에서의 키워드 기반검색을 통해 rrf 알고리즘 통해 순위를 매기고 출력
Case 3)자연어 질의가 정형데이터청크 + 비정형데이터청크의 혼합문이라면 1차로 regex 정규표현식으로 정형데이터 SQL 쿼리문을통해 1차로 패널 검색 후 2차로 비정형데이터의 하이브리드 검색을 통해 패널을 최종 추출함
